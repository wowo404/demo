package org.liu.base64;

import javax.imageio.ImageIO;
import java.awt.image.BufferedImage;
import java.io.BufferedInputStream;
import java.io.ByteArrayInputStream;
import java.io.File;
import java.io.IOException;
import java.util.Base64;

/**
 * @author liuzhangsheng
 * @create 2018/9/4
 */
public class TestBase64 {

    public static void main(String[] args) throws IOException {
        String base64 = "data:image/jpg;base64,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";
        String substring = base64.substring(base64.indexOf(",") + 1);
        byte[] bytes = Base64.getDecoder().decode(substring);

        ByteArrayInputStream bis = new ByteArrayInputStream(bytes);
        BufferedInputStream buffer = new BufferedInputStream(bis);

        File file = new File("D:\\funny\\test.jpeg");
        System.out.println(file.getParentFile());

        BufferedImage bufferedImage = ImageIO.read(buffer);
        ImageIO.write(bufferedImage, "jpeg", file);
    }

}
